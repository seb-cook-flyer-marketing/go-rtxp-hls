# Go RTMP/RTSP to HLS Streaming Server

This project is a Go-based HTTP server that converts an incoming rtmp or rtsp stream and serves HLS (HTTP Live Streaming) streams. It uses the Gin web framework and FFmpeg for stream processing.

## Features

- Serve HLS streams generated by FFmpeg.
- Secure endpoints with authentication middleware.
- Dockerized for easy deployment.

## Prerequisites

- [Go](https://golang.org/doc/install) (version 1.20 or later)
- [Docker](https://docs.docker.com/get-docker/)
- [FFmpeg](https://ffmpeg.org/download.html) (if running locally without Docker)

## Project Structure

go-rtxp-hls/
├── Dockerfile
├── go.mod
├── go.sum
├── main.go
├── stream/
│ └── stream.go
├── config/
│ └── config.go
├── authorisation/
│ └── authorisation.go
├── ffmpeg/
│ └── ffmpeg.go
├── types/
│ └── types.go


## Getting Started

### Clone the Repository


### Build and Run with Docker

1. **Build the Docker Image**:

    ```bash
    docker build -t go-hls-server .
    ```

2. **Run the Docker Container**:

    ```bash
    docker run -d -p 8080:8080 --name go-hls-server go-hls-server
    ```

3. **Access the HLS Stream**:

    Open your browser or use `curl` to access the stream:

    ```
    http://localhost:8080/public/stream.m3u8
    ```

### Run Locally without Docker

1. **Install Dependencies**:

    ```bash
    go mod download
    ```

2. **Run the Server**:

    ```bash
    go run main.go
    ```

3. **Access the HLS Stream**:

    Open your browser or use `curl` to access the stream:

    ```
    http://localhost:8080/public/stream.m3u8
    ```

## Endpoints

- `POST /stream/convert`: Convert a stream (requires authentication).
- `POST /stream/stop`: Stop a stream (requires authentication).

## Example `curl` Commands

### Convert Stream

```bash
curl -X POST http://localhost:8080/stream/convert -H "Authorization: Bearer your-secret-token" -d "url=rtmp://your-rtmp-server/{channel_name e.g. "live"}/{your-stream-key e.g. "te}"
```

### Stop Stream

```bash
curl -X POST http://localhost:8080/stream/stop -H "Authorization: Bearer your-secret-token" -d "stream_id=your-stream-id"
```


## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.

## Contributing

1. Fork the repository.
2. Create a new branch (`git checkout -b feature-branch`).
3. Make your changes.
4. Commit your changes (`git commit -am 'Add new feature'`).
5. Push to the branch (`git push origin feature-branch`).
6. Create a new Pull Request.

## Contact

For any questions or issues, please open an issue on this repository or contact the maintainer at [seb.cook@flyer.marketing].
